<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Diamonds in Dystopia | Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="/socket.io/socket.io.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script type="text/javascript" src="/js/mespeak/mespeak.full.min.js"></script>
  <script type="text/javascript" src="/js/Tone.js"></script>
  <link rel="stylesheet" href="/styles/portal.css">
  <script type="text/javascript" src="/js/DiamondSound.js"></script>
  <script src="/js/setup.js"></script>
</head>
<html>

<body>
  <header><a href="/"><img src="/images/logo_side.png"></a></header>
  <main>
    <nav>
      <h1>I am...</h1>
      <ul>
        <li><a href="/setup">poet</a></li>
        <li id="audience"><select class="sessionSelect"></select></li>
        <li id="theater"><select class="sessionSelect"></select></li>
        <li><a href="http://diamonds.emdm.io">curious</a></li>
      </ul>
    </nav>
  </main>

  <script>

    getSessions();

    //   var x = document.getElementsByClassName("example");

    //   var i;
    // for (i = 0; i < x.length; i++) {
    //   x[i].style.backgroundColor = "red";
    // }

    let sessionSelectClass = document.getElementsByClassName("sessionSelect");

    for (let e of sessionSelectClass) {
      e.onchange = function () {
        if (this.selectedIndex !== 0) {
          window.location.href = this.value;
        }
      };
    }

    for (let e of sessionSelectClass) {
      e.addEventListener("change", function () {
        let sel = sessionSelectClass;
        let sessionName = sel.options[sel.selectedIndex].text;
        console.log("Session Submitted: ", sessionName);
        registerAudience(sessionName);
      });
    }

  </script>

</body>

</html>